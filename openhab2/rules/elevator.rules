rule "Power Mode Options"
when
    Item PowerMode received update
then
    
    if (PowerMode.state.toString == "0")
    {    
        //TODO:  
        //Check SwitchNet and PowerNet is within range otherwise send elevator to Lobby  
        //Check Power Status is ON to proceed
        //Move switch one way then check Power Status if not OFF then move switch other way 
        SwitchAdapter.sendCommand(OFF)
        //TEMPORAL (JUST FOR DISPLAY)
        PowerStatus.sendCommand(OFF)
        //logInfo("P-Mode", "OFF")
    }
    if (PowerMode.state.toString == "1")
    {        
        //TODO:
        //Check SwitchNet and PowerNet is within range 
        //Check Power Status is OFF to proceed
        //Move switch one way then check Power Status if not ON then move switch other way 
        SwitchAdapter.sendCommand(ON)
        //TEMPORAL (JUST FOR DISPLAY)
        PowerStatus.sendCommand(ON)
        //logInfo("P-Mode", "ON")
    }
    if (PowerMode.state.toString == "2")
    {       
        //TODO: 
        //while (PowerMode.state == "AUTO")
        //Check time, if time 8 AM and SwitchNet within range
        //Check Power Status is OFF to proceed
        //Move switch one way then check Power Status if not OFF then move switch other way 
        //Check time, if time 8 PM send elevator to Lobby so that SwitchNet within range
        //Check Power Status is ON to proceed
        //Move switch one way then check Power Status if not ON then move switch other way 
        //logInfo("P-Mode", "AUTO")
    }
end


rule "Group"
when
    Member of PisosYOficinas received command
then
    logInfo("GroupRule", "Member " + triggeringItem.name + " to MUHAHA" + receivedCommand)
end

rule "P1O1 RULEBABY"
when
    Item P1O1 changed
then
    logInfo("test", P101.state.toString)
    var String results = ""
    results = executeCommandLine("python /home/openhabian/Elevator-AI/nfc_reader/activate.py --input P5O4", 5000)
    logInfo("Power_Plug", "Results are: " + results)
end

rule "P1O2 RULEBABY"
when
    Item P1O2 received command
then
    logInfo("test", P1O2.state.toString)
    var String results = ""
    results = executeCommandLine("python /home/openhabian/Elevator-AI/nfc_reader/activate.py --input P5O4", 5000)
    logInfo("Power_Plug", "Results are: " + results)
end

rule "P1O3 RULEBABY"
when
    Item P1O3 received command
then
    logInfo("test", P1O3.state.toString)
    logInfo("test2", receivedCommand.toString)
    P1O4.postUpdate(ON)
end